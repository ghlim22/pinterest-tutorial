name: pingpong

services:
  backend:
    build: ./backend
    container_name: backend
    env_file:
      - ./.env
    networks:
      - intra
    restart: on-failure

  nginx:
    build: ./nginx
    container_name: nginx
    networks:
      - intra
    ports:
      - '80:80'
    restart: on-failure

#  portainer:
#    image: portainer/portainer-ce:latest
#    container_name: portainer
#    networks:
#      - intra
#    ports:
#      - '9443:9443'
#    restart: on-failure
#    volumes:
#      - portainer-data:/data
#      - /var/run/docker.sock:/var/run/docker.sock


networks:
  intra:
    driver: bridge

#volumes:
#  portainer-data:
#    driver: local
